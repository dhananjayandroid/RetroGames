<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  html, body { width: 100%; height: 100%; margin: 0; padding: 0; background: #111; color: #fff; font-family: monospace; overflow: hidden; touch-action: none; }
  canvas { display: block; width: 100%; height: 100%; position: absolute; top: 0; left: 0; }
  #score { position: absolute; top: 10px; left: 10px; font-size: 24px; color: #0ff; text-shadow: 0 0 5px #0ff; z-index: 10; }
  #msg { position: absolute; top: 50%; width: 100%; text-align: center; font-size: 24px; z-index: 10; display: none; }
</style>
</head>
<body>
<div id="score">0</div>
<div id="msg">TAP TO START</div>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();
let playing = false; let score = 0;
let player = { y: 0, v: 0 }; let obstacles = []; let speed = 5;
function startGame() {
  playing = true; score = 0; speed = 5; obstacles = []; player = { y: canvas.height - 100, v: 0 };
  document.getElementById('msg').style.display = 'none';
  loop();
}
window.addEventListener('touchstart', (e) => {
  if (!playing) startGame();
  else if (player.y >= canvas.height - 100) player.v = -15;
});
window.addEventListener('mousedown', (e) => {
  if (!playing) startGame();
  else if (player.y >= canvas.height - 100) player.v = -15;
});
function update() {
  speed += 0.005; score += speed * 0.1;
  document.getElementById('score').innerText = Math.floor(score);
  player.v += 0.8; player.y += player.v;
  if (player.y > canvas.height - 100) { player.y = canvas.height - 100; player.v = 0; }
  if (Math.random() < 0.02) obstacles.push({ x: canvas.width, w: 30, h: 30 + Math.random() * 40 });
  obstacles.forEach(o => o.x -= speed);
  obstacles.forEach(o => {
    if (o.x < 90 && o.x + o.w > 50 && player.y + 10 > canvas.height - 100 - o.h) gameOver();
  });
  obstacles = obstacles.filter(o => o.x > -50);
}
function draw() {
  ctx.fillStyle = '#111'; ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#0ff'; ctx.fillRect(50, player.y - 40, 40, 40);
  ctx.fillStyle = '#f00'; obstacles.forEach(o => ctx.fillRect(o.x, canvas.height - 100 - o.h, o.w, o.h));
  ctx.strokeStyle = '#fff'; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(0, canvas.height - 100); ctx.lineTo(canvas.width, canvas.height - 100); ctx.stroke();
}
function gameOver() {
  playing = false;
  if (window.Android) window.Android.gameOver(Math.floor(score));
  else { document.getElementById('msg').style.display = 'block'; document.getElementById('msg').innerText = "GAME OVER"; }
}
window.revive = function() {
  playing = true; obstacles = []; loop();
};
function loop() {
  if (!playing) return; update(); draw(); requestAnimationFrame(loop);
}
document.getElementById('msg').style.display = 'block';
</script>
</body>
</html>
