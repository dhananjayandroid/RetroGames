<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  body { margin: 0; padding: 0; background: #111; color: #fff; font-family: monospace; overflow: hidden; touch-action: none; }
  canvas { display: block; width: 100%; height: 100%; }
  #score { position: absolute; top: 10px; left: 10px; font-size: 24px; color: #0ff; text-shadow: 0 0 5px #0ff; }
  #msg { position: absolute; top: 50%; width: 100%; text-align: center; font-size: 24px; display: none; }
</style>
</head>
<body>
<div id="score">0</div>
<div id="msg">TAP TO START</div>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize);
resize();
let playing = false; let score = 0; let lastTime = 0;
let paddle = { x: 0, w: 100 }; let ball = { x: 0, y: 0, vx: 0, vy: 0 }; let bricks = [];
function startGame() {
  playing = true; score = 0; paddle.x = canvas.width / 2 - 50;
  ball = { x: canvas.width / 2, y: canvas.height - 150, vx: 4, vy: -4 };
  bricks = []; for(let i=0; i<5; i++) for(let j=0; j<6; j++) bricks.push({ x: j*(canvas.width/6)+5, y: i*30+50, w: canvas.width/6-10, h: 20 });
  document.getElementById('msg').style.display = 'none';
  loop(0);
}
window.addEventListener('touchstart', handleTouch);
window.addEventListener('touchmove', handleTouch);
function handleTouch(e) {
  if (!playing) { startGame(); return; }
  paddle.x = (e.touches[0].clientX) - paddle.w / 2;
}
function update() {
  ball.x += ball.vx; ball.y += ball.vy;
  if (ball.x < 0 || ball.x > canvas.width) ball.vx *= -1;
  if (ball.y < 0) ball.vy *= -1;
  if (ball.y > canvas.height - 120 && ball.x > paddle.x && ball.x < paddle.x + paddle.w) ball.vy *= -1.05;
  if (ball.y > canvas.height) gameOver();
  bricks.forEach((b, i) => {
    if (ball.x > b.x && ball.x < b.x + b.w && ball.y > b.y && ball.y < b.y + b.h) {
      ball.vy *= -1; bricks.splice(i, 1); score += 10;
    }
  });
  document.getElementById('score').innerText = Math.floor(score);
}
function draw() {
  ctx.fillStyle = '#111'; ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#0ff'; ctx.fillRect(paddle.x, canvas.height - 120, paddle.w, 15);
  ctx.fillStyle = '#fff'; ctx.beginPath(); ctx.arc(ball.x, ball.y, 8, 0, Math.PI*2); ctx.fill();
  ctx.fillStyle = '#f0f'; bricks.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));
}
function gameOver() {
  playing = false;
  if (window.Android) window.Android.gameOver(Math.floor(score));
  else { document.getElementById('msg').style.display = 'block'; document.getElementById('msg').innerText = "GAME OVER"; }
}
window.revive = function() { playing = true; ball.y = canvas.height - 150; ball.vy = -4; loop(0); };
function loop(t) {
  if (!playing) return; update(); draw(); requestAnimationFrame(loop);
}
document.getElementById('msg').style.display = 'block';
</script>
</body>
</html>
